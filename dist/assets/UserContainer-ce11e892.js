import{u as y,l as f,m as U,o as v,q as S,t as r,v as s,M as x,x as h,I as c,y as d,z as C,A as g,_ as k,B as E,F as _,C as w,D as A,E as M,G as I}from"./index-290aef40.js";import{u as P}from"./useQuery-d5484aea.js";const R=()=>{const i=y(),{successToast:t}=f(),{setLoading:l}=U();return v({mutationFn:e=>S(e),onMutate:()=>{l(!0)},onError:async e=>{console.log(e)},onSuccess:async e=>{t(`Success Update User ${e}`),i.invalidateQueries({queryKey:["users"]})},onSettled:()=>{l(!1)}})},B=({isOpen:i,data:t,onDidDismiss:l})=>{const[e,u]=r.useState({}),{mutate:p}=R(),a=(n,o)=>{u(b=>({...b,[n]:o}))},m=n=>{n.preventDefault(),p(e),l()};return r.useEffect(()=>{t&&u({id:t.id,username:t.username,password:t.password,name:t.name,isAdmin:t.isAdmin})},[t]),s(x,{title:"Update User",isOpen:i,onDidDismiss:l,children:h("form",{onSubmit:m,children:[s(c,{children:s(d,{type:"text",label:"Id",labelPlacement:"floating",value:e==null?void 0:e.id,onIonInput:n=>a("id",n.detail.value),disabled:!0})}),s(c,{children:s(d,{type:"text",label:"Username",labelPlacement:"floating",value:e==null?void 0:e.username,onIonInput:n=>a("username",n.detail.value)})}),s(c,{children:s(d,{type:"password",label:"Password",labelPlacement:"floating",value:e==null?void 0:e.password,onIonInput:n=>a("password",n.detail.value)})}),s(c,{children:s(d,{type:"text",label:"Name",labelPlacement:"floating",value:e==null?void 0:e.name,onIonInput:n=>a("name",n.detail.value)})}),s(c,{children:s(C,{checked:e==null?void 0:e.isAdmin,onIonChange:n=>a("isAdmin",n.detail.checked),children:"Is Admin"})}),s(g,{type:"submit",expand:"block",children:"Submit"})]})})},F=r.lazy(()=>k(()=>import("./TableUser-d3fe9e37.js"),["assets/TableUser-d3fe9e37.js","assets/index-290aef40.js","assets/index-b6f9f69a.css","assets/Table-d4b3ec2b.js"])),q=()=>{const i=r.useCallback(async()=>await E(),[]),{data:t,refetch:l}=P(["users"],i),[e,u]=r.useState(),[p,a]=r.useState(!1),m=async o=>{l(),o.detail.complete()},n=o=>{u(o),a(!0)};return h(_,{children:[h(w,{title:"Data Users",children:[s(A,{slot:"fixed",onIonRefresh:m,children:s(M,{})}),s(r.Suspense,{fallback:s(I,{name:"crescent"}),children:t?s(F,{data:t,handleClickBtnEdit:o=>n(o)}):s(I,{name:"crescent"})})]}),s(B,{isOpen:p,data:e,onDidDismiss:()=>a(!1)})]})};export{q as default};
